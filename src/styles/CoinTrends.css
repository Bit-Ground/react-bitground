/* src/styles/CoinTrends.css */

/* 기본 변수 설정 */
:root {
  --card-radius: 20px;
  --card-padding: 20px;
  --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --title-height: 50px;

  --color-up: #d24f45; /* 빨강 계열 (상승) */
  --color-down: #1261c4; /* 파랑 계열 (하락) */
  --color-text: #333;
  --color-subtext: #666;

  --news-red: #ff3b3b; /* 뉴스 배경 빨간색 */
  --news-text: #ffffff; /* 뉴스 텍스트 흰색 */

  /* === 유의/주의 뱃지 색상 최종 변경 === */
  /* 유의 (Caution): 빨간색 계열 - 강한 경고의 느낌 */
  --caution-badge-color: #d24f45; /* --color-up과 동일한 강한 빨강 */
  /* 주의 (Alert): 주황/노랑 계열 - 약한 경고/관심의 느낌 */
  --alert-badge-color: #FFB380; /* 부드러운 오렌지 계열 */
}

/* 메인 컨테이너 */
.trends-container {
  display: grid;
  grid-template-columns: repeat(12, 1fr); /* 12열 그리드 유지 */
  gap: 15px; /* 카드 간 간격 */
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
  background: #f8f9fa;
  align-items: start; /* 상단 정렬 유지 */
  position: relative; /* 로딩 오버레이를 위해 필요 */
}

/* 기본 카드 스타일 */
.trend-card {
  background: white;
  border-radius: var(--card-radius);
  box-shadow: var(--card-shadow);
  overflow: hidden; /* 내용이 넘칠 때 숨김 처리 */
  display: flex; /* 내부 컨텐츠를 위한 flexbox */
  flex-direction: column; /* 세로 정렬 */
}

.trend-card .card-header {
  height: var(--title-height);
  padding: 0 30px;
  border-bottom: 1px solid #eee;
  display: flex;
  align-items: center;
  justify-content: space-between; /* 뉴스 검색 컨트롤을 위해 추가 */
  flex-shrink: 0; /* 헤더는 크기가 줄어들지 않음 */
}

.trend-card .card-title {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-text);
  margin: 0;
}

.trend-card .card-content {
  padding: var(--card-padding);
  flex-grow: 1; /* 남은 공간을 모두 차지 */
  overflow-y: auto; /* 내용이 넘칠 경우 스크롤 */
}

/* 코인 리스트 공통 스타일 */
.coin-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.coin-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #f0f0f0;
}

.coin-item:last-child {
  border-bottom: none;
}

.coin-name {
  font-size: 14px;
  color: var(--color-text);
  flex-grow: 1; /* 이름이 공간을 차지하도록 */
}

.coin-symbol {
  color: var(--color-subtext);
  font-size: 12px;
  margin-left: 8px;
}

.coin-value {
  font-weight: 500;
}

.coin-value.positive { /* 'up' 대신 'positive' 사용 */
  color: var(--color-up);
}

.coin-value.negative { /* 'down' 대신 'negative' 사용 */
  color: var(--color-down);
}

/* 유의/주의 종목 뱃지 스타일 */
.coin-warning {
  font-size: 12px;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 4px;
  margin-left: 10px;
  white-space: nowrap; /* 줄바꿈 방지 */
}

/* 유의 뱃지 색상 */
.trend-card.caution-trading .coin-warning {
  background-color: var(--caution-badge-color); /* 변경된 색상: 빨강 계열 */
  color: var(--news-text); /* 텍스트 색상: 흰색 (어두운 배경에 대비) */
}

/* 주의 뱃지 색상 */
.trend-card.alert-trading .coin-warning {
  background-color: var(--alert-badge-color); /* 변경된 색상: 주황/노랑 계열 */
  color: var(--color-text); /* 텍스트 색상: 짙은 회색 (밝은 배경에 대비) */
}


/* 섹션별 크기 조정 및 그리드 배치 */

/* -------------------- 첫 번째 줄 -------------------- */
/* AI 분석 카드 (bitcoin-analysis 클래스 사용) */
.trend-card.bitcoin-analysis {
  grid-column: span 8;
  grid-row: 1;
  height: 250px; /* 거래량 많은 종목과 높이를 맞추기 위해 250px로 조정 */
}

/* === AI 분석 카드 내부 스타일 추가 === */
.trend-card.bitcoin-analysis .card-content {
  display: flex;
  flex-direction: column;
  justify-content: center; /* 세로 중앙 정렬 */
  align-items: center; /* 가로 중앙 정렬 */
  text-align: center; /* 텍스트 중앙 정렬 */
}

.ai-analysis-results {
  width: 100%;
}

.ai-analysis-results .analysis-text {
  /* 가독성을 위한 폰트 설정 */
  font-family: 'Noto Sans KR', 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
  font-size: 15px; /* 글씨 크기 증가 */
  line-height: 1.8; /* 줄 간격 증가 */
  color: var(--color-text);
  white-space: pre-wrap; /* 줄바꿈 및 공백 유지 */
  margin-bottom: 15px;
}

.analysis-meta {
  display: flex;
  justify-content: center;
  gap: 20px;
  font-size: 13px;
  color: var(--color-subtext);
}

.analysis-score.positive {
  color: var(--color-up);
  font-weight: bold;
}

.analysis-score.negative {
  color: var(--color-down);
  font-weight: bold;
}

/* AI 분석 코인 선택 드롭다운 (기존 popular-coin-select 재사용) */
/* .coin-select-wrapper { ... } */
/* .popular-coin-select 에 대한 스타일은 뉴스 섹션에 정의된 것을 따름 */

/* AI 분석 드롭다운 옵션의 배경색은 기본값(흰색)을 유지하도록 재정의 (필요시) */
.trend-card.bitcoin-analysis .popular-coin-select option {
  background-color: #fff; /* AI 분석 드롭다운 옵션의 배경색을 흰색으로 */
  color: var(--color-text); /* 텍스트 색상을 검은색 계열로 */
}


/* 거래량 많은 종목 */
.trend-card.high-volume {
  grid-column: span 4;
  grid-row: 1;
  height: 250px; /* 비트코인 분석과 높이 통일 */
}

/* -------------------- 두 번째 줄 -------------------- */
/* 최신 뉴스 */
.trend-card.latest-news {
  grid-column: span 8;
  grid-row: 2; /* 2행에 위치 */
  background: var(--news-red);
  height: 300px; /* 옆의 상승폭 큰 종목과 높이 통일 */
  margin-top: 0; /* 음수 마진 제거 */
  display: flex; /* 내부 컨텐츠를 위한 flexbox */
  flex-direction: column; /* 세로 정렬 */
}

.trend-card.latest-news .card-header {
  border-color: rgba(255, 255, 255, 0.1);
}

.trend-card.latest-news .card-title {
  color: var(--news-text);
}

.trend-card.latest-news .news-list {
  list-style: none;
  padding: 0;
  margin: 0;
  flex-grow: 1; /* 목록이 남은 공간을 차지하도록 */
  overflow-y: auto; /* 목록 내용이 넘칠 경우 스크롤 */
  padding: var(--card-padding); /* 컨텐츠 패딩 적용 */
}

/* === 최신 뉴스 아이템 스타일 수정 === */
.trend-card.latest-news .news-item {
  display: flex; /* Flexbox 활성화 */
  justify-content: space-between; /* 제목과 날짜를 양 끝으로 */
  align-items: flex-start; /* 세로 정렬: 상단 정렬 */
  padding: 6px 0; /* 상하 패딩 줄여 간격 좁히기 */
  border-bottom: none; /* 구분선 제거 */
}

.trend-card.latest-news .news-item:last-child {
  border-bottom: none;
}

.trend-card.latest-news .news-title {
  color: var(--news-text);
  font-size: 14px;
  text-decoration: none;
  display: -webkit-box; /* 여러 줄 말줄임표를 위해 필요 */
  -webkit-line-clamp: 2; /* 두 줄까지 표시 */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 0; /* 하단 마진 제거 */
  line-height: 1.4;
  flex-grow: 1; /* 제목이 공간을 최대한 차지하도록 */
  margin-right: 10px; /* 제목과 날짜 사이 간격 */
}

.trend-card.latest-news .news-title:hover {
  opacity: 0.8;
}

.trend-card.latest-news .news-date {
  color: rgba(255, 255, 255, 0.7);
  font-size: 12px;
  white-space: nowrap; /* 줄바꿈 방지 */
  flex-shrink: 0; /* 날짜가 줄어들지 않도록 */
  margin-left: auto; /* 우측에 붙이기 */
}
/* === 최신 뉴스 아이템 스타일 수정 끝 === */


/* 뉴스 검색 컨트롤 */
.news-search-controls {
  display: flex;
  gap: 10px;
  align-items: center;
}

.news-search-input,
.popular-coin-select { /* AI 분석 드롭다운에도 영향을 줌 */
  padding: 6px 10px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 5px;
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--news-text);
  font-size: 13px;
  outline: none;
  height: 32px;
}

.news-search-input::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

.news-search-input:focus,
.popular-coin-select:focus {
  border-color: rgba(255, 255, 255, 0.6);
}

/* 드롭다운 화살표 색상 변경 */
.popular-coin-select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url('data:image/svg+xml;utf8,<svg fill="%23ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
  background-repeat: no-repeat;
  background-position: right 8px center;
  padding-right: 30px;
}

.popular-coin-select option {
  background-color: var(--news-red); /* 뉴스 드롭다운 옵션 색상 */
  color: var(--news-text);
}


/* === 뉴스 페이지네이션 스타일 === */
.news-pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 10px var(--card-padding); /* 카드 패딩과 동일하게 적용 */
  border-top: 1px solid rgba(255, 255, 255, 0.1); /* 상단 구분선 */
  background-color: rgba(0, 0, 0, 0.1); /* 약간 어두운 배경으로 구분 */
  flex-shrink: 0; /* 페이지네이션 영역이 줄어들지 않도록 */
}

.news-pagination button {
  background-color: rgba(255, 255, 255, 0.2); /* 반투명 흰색 버튼 */
  color: var(--news-text); /* 흰색 텍스트 */
  border: none;
  border-radius: 5px;
  padding: 8px 12px;
  margin: 0 5px;
  cursor: pointer;
  font-size: 13px;
  transition: background-color 0.2s ease, opacity 0.2s ease;
}

.news-pagination button:hover:not(:disabled) {
  background-color: rgba(255, 255, 255, 0.3);
}

.news-pagination button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.news-pagination span {
  color: var(--news-text);
  font-size: 14px;
  margin: 0 10px;
  font-weight: 500;
}
/* === 뉴스 페이지네이션 스타일 끝 === */


/* 상승폭 큰 종목 */
.trend-card.price-increase {
  grid-column: span 4;
  grid-row: 2;
  height: 300px; /* 최신 뉴스와 높이 통일 */
}

/* -------------------- 세 번째 줄 -------------------- */

/* 거래유의 종목 */
.trend-card.caution-trading {
  grid-column: span 4;
  grid-row: 3; /* 3번째 줄 첫 번째 칸 */
  height: 300px; /* 아래 두 카드와 높이 통일 */
}

/* 투자주의 종목 */
.trend-card.alert-trading {
  grid-column: span 4; /* 4칸 너비 */
  grid-row: 3; /* 거래유의 종목과 같은 3번째 줄 */
  height: 300px; /* 거래유의, 하락폭 큰 종목과 높이 통일 */
}

/* 하락폭 큰 종목 */
.trend-card.price-decrease {
  grid-column: span 4; /* 4칸 너비 */
  grid-row: 3; /* 3번째 줄 마지막 칸 */
  height: 300px; /* 거래유의, 투자주의 종목과 높이 통일 */
}


/* 반응형 스타일 */
@media (max-width: 1024px) {
  .trends-container {
    grid-template-columns: repeat(6, 1fr); /* 6칸으로 변경 */
    gap: 10px; /* 간격 조정 */
  }

  /* 모든 카드는 이제 grid-column: span 6;으로 전체 너비를 차지하고 자동으로 다음 행으로 배치됩니다. */
  .trend-card {
    grid-column: span 6; /* 모든 카드가 6칸 전체 너비 차지 */
    grid-row: auto; /* 자동 배치 */
    height: auto; /* 내용에 따라 높이 조절 */
    min-height: 180px; /* 최소 높이 */
  }

  .trend-card.latest-news {
    min-height: 300px; /* 뉴스 카드 최소 높이 */
  }

  /* 뉴스 검색 컨트롤 - 간격 좁히기 */
  .news-search-controls {
    gap: 5px;
  }
}

@media (max-width: 768px) {
  .trends-container {
    grid-template-columns: 1fr; /* 1칸으로 변경 */
    padding: 16px;
    gap: 10px;
  }

  .trend-card {
    grid-column: 1 / -1; /* 항상 전체 너비 */
    min-height: 180px;
  }

  /* 모바일에서 헤더 요소들을 세로로 정렬하고 검색창이 전체 너비 차지 */
  .trend-card .card-header {
    flex-direction: column;
    align-items: flex-start;
    padding: 15px;
    height: auto;
  }

  .news-search-controls {
    flex-direction: column; /* 검색 컨트롤 세로 정렬 */
    width: 100%; /* 전체 너비 */
  }

  .news-search-input,
  .popular-coin-select {
    width: 100%; /* 검색 입력창과 드롭다운 전체 너비 */
    margin-top: 5px;
  }

  .popular-coin-select {
    margin-top: 0;
  }

  /* AI 분석 카드 모바일 반응형 */
  .trend-card.bitcoin-analysis .card-content.ai-analysis-content,
  .trend-card.bitcoin-analysis .ai-analysis-results .analysis-text {
    font-size: 14px; /* 모바일에서 글씨 크기 약간 줄임 */
    line-height: 1.7; /* 모바일에서 줄 간격 조정 */
  }
}


/* 로딩 및 에러 상태 */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10;
  border-radius: var(--card-radius);
}

.spinner {
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: #666;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin-bottom: 10px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-text, .analysis-loading, .no-results {
  text-align: center;
  padding: 20px;
  color: #666;
}

.no-results {
  padding: 50px 20px; /* 빈 데이터 시 중앙 정렬을 위한 패딩 */
}

/* 스크롤바 숨기기 */
.card-content {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.card-content::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera*/
}